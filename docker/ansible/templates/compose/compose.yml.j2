version: "3.8"

include:
{% if 'dnsservers' in group_names %}
  - $DOCKERDIR/data/compose/adguard.yml
{% endif %}
{% if 'management' in group_names %}
  - $DOCKERDIR/data/compose/cloudflare.yml
  - $DOCKERDIR/data/compose/grafana.yml
  - $DOCKERDIR/data/compose/unifi.yml
{% endif %}
{% if 'production' in group_names %}
  - $DOCKERDIR/data/compose/code-server.yml
  - $DOCKERDIR/data/compose/drawio.yml
  - $DOCKERDIR/data/compose/nextcloud.yml
  - $DOCKERDIR/data/compose/plex.yml
  - $DOCKERDIR/data/compose/samba.yml
{% endif %}
{% if 'webservers' in group_names %}
  - $DOCKERDIR/data/compose/echo-server.yml
  - $DOCKERDIR/data/compose/homepage.yml
  #- $DOCKERDIR/data/compose/oauth.yml
  - $DOCKERDIR/data/compose/portainer.yml
  - $DOCKERDIR/data/compose/traefik-proxy.yml
{% endif %}
  #- $DOCKERDIR/data/compose/watchtower.yml

networks:
  default:
    driver: bridge
