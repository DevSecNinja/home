services:
  jupyter:
    container_name: jupyter
    image: quay.io/jupyter/scipy-notebook:2024-03-14
    depends_on:
      - traefik
    networks:
      - t2_proxy
    restart: always
    security_opt:
      - no-new-privileges:true
    volumes:
      - jupyter_data:/home/jovyan/work
    mem_limit: 2048m
    environment:
      - TZ=${TZ}
      - JUPYTER_ENABLE_LAB=yes
    command: "start-notebook.sh --NotebookApp.token='' --NotebookApp.password=''"
    labels:
      # Homepage
      - homepage.group=Productivity
      - homepage.name=Jupyter
      - homepage.icon=jupyter.svg
      - homepage.href=https://jupyter.$DOMAINNAME
      - homepage.description=Interactive Computing Platform
      # Traefik
      - "traefik.enable=true"
      ## Middlewares
      - "traefik.http.routers.jupyter-rtr.middlewares=chain-auth@file"
      ## HTTP Services
      - "traefik.http.routers.jupyter-rtr.service=jupyter-svc"
      - "traefik.http.services.jupyter-svc.loadbalancer.server.port=8888"

volumes:
  jupyter_data:
