services:
  samba:
    container_name: samba
    # TODO: [samba] Replace old Samba container
    image: dperson/samba:amd64@sha256:e1d2a7366690749a7be06f72bdbf6a5a7d15726fc84e4e4f41e967214516edfd
    restart: always
    networks:
      - samba
    ports:
      - "445:445/tcp"
    security_opt:
      - no-new-privileges:true
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - TZ=${TZ}
    volumes:
      - $DOCKERDATADIR:/data
    command: '-s "Data;/data;yes;no;no;${SAMBA_USERNAME}" -s "Study;/data/study;yes;no;no;${SAMBA_USERNAME}" -s "Backup;/data/backup;yes;no;no;${SAMBA_USERNAME}" -u "${SAMBA_USERNAME};${SAMBA_PASSWORD}" -p'

networks:
  samba:
    name: samba
    driver: bridge
